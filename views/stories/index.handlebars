<!DOCTYPE html>

<h1>Stories</h1>

<div class="row">
	{{#each stories}}
		<div class="col s12 m4">
			<div class="card">
				<div class="card-image">
					{{#if user}}
						{{{editIcon user.id ../user.id id}}}
<!-- Watch this! user.id means story.user cause we inside the loop; ../user.id is the global object user; id is story.id-->
					{{/if}}
				</div>
				<div class="card-content center-align">
					<h5>{{title}}</h5>
					<p class="story-text">{{stripTags (truncate body 150)}}</p>	<!-- Three braces parse HTML 
						Also, notice the syntax for the 'truncate' function !!!
						this is how you call it once you load it into the handlebars helpers 
						if you are using multiple function, you put the subsequent fns into () -->
					<br>
					<div class="chip">
						<img src="{{user.image}}">
						<a href="/stories/user/{{user.id}}">{{user.firstName}} {{user.lastName}}</a>
					</div>
				</div>
				<div class="card-action center-align">
					<a href="/stories/show/{{id}}" class="btn grey">Read More</a>
				</div>
			</div>
		</div>
	{{else}}
		<p>No stories found.</p>
	{{/each}}

</div>